**Цель:**  
- Изучить принципы управления памятью в Linux, освоить инструменты мониторинга оперативной памяти (RAM) и swap-пространства.
- Изучить инструменты мониторинга памяти, управление виртуальной памятью (файлом подкачки) в Windows.

## **Часть 1. Debian**
---
#### **Задание 1: Мониторинг памяти**  

1. **Команда `free`:**  
   - Выведите информацию о памяти в человеко-читаемом формате:  
     ```bash
     free -h
     ```  
   - Обратите внимание на поля:  
     - **total** — общий объём памяти.  
     - **used** — используемая память.  
     - **available** — доступная для новых процессов.  
     - **swap** — использование swap-пространства.  
   - Сделайте скриншот
2. **Утилита `vmstat`:**  
   - Запустите команду с интервалом 2 секунды:  
     ```bash
     vmstat 2
     ```  
   - Запустите браузер или другое по требующее много памяти
   - Анализируйте вывод утилиты vmstat
   - Сделайте скриншот
3. **Утилита `htop`:**  
   - Запустите `htop`.  
   - Отсортируйте процессы по потреблению памяти (клавиша `F6` → **PERCENT_MEM**).  
   - Запишите 3 процесса с наибольшим использованием памяти.  
   - Сделайте скриншот

**Вопросы для отчёта:**  
- Какая доля памяти занята кэшем? Как это влияет на производительность?  
- Почему значение **available** отличается от **free**?  

---
#### **Задание 2: Анализ памяти процесса**  

1. **Команда `ps`:**  
   - Выведите процессы с детализацией по памяти:  
	 ```bash
     ps aux --sort=-%mem | head -n 5
     ```  
   - Сделайте скриншот
2. **Файловая система `/proc`:**  
   - Найдите PID любого процесса (например, `zsh`):  
     ```bash
     pgrep zsh
     ```  
   - Изучите информацию о памяти процесса:  
     ```bash
     bat /proc/<PID>/status
     ```  
   - Обратите внимание на следующие строки:
     - **VmSize** — виртуальная память.  
     - **VmRSS** — резидентная память (RAM).  
     - **VmSwap** — память в swap.  
   - Сделайте скриншот
3. **Утилита `pmap`:**  
   - Просмотрите распределение памяти процесса:  
     ```bash
     pmap -X <PID>
     ```  
   - Сделайте скриншот

**Вопросы для отчёта:**  
- Чем отличается **VmSize** от **VmRSS**?  
- Какие библиотеки (DLL) занимают больше всего памяти в процессе?  

---
#### **Задание 3: Управление swap-пространством**  

1. **Создание swap-файла:**  
   - Создайте файл размером 512 МБ:  
     ```bash
     sudo fallocate -l 512M /swapfile_test
     ```  
   - Настройте права:  
     ```bash
     sudo chmod 600 /swapfile_test
     ```  
   - Проверьте права на файл:
   ```bash
    ll /
    ```
   - Сделайте его swap-областью:  
     ```bash
     sudo mkswap /swapfile_test
     ```  
   - Сделайте скриншот 
2. **Активация swap:**  
   - Включите временный swap:  
     ```bash
     sudo swapon /swapfile_test
     ```  
   - Проверьте, что swap добавлен:  
     ```bash
    swapon --show
	free -h
     ```  
   - Сделайте скриншот  
3. **Отключение swap:**  
   - Деактивируйте swap-файл:  
     ```bash
     sudo swapoff /swapfile_test
     ```  
   - Удалите файл:  
     ```bash
     sudo rm /swapfile_test
     ```  

**Вопросы для отчёта:**  
- Какие риски возникают при использовании swap на HDD?  
- Как сделать swap-файл постоянным (автоматически подключаемым при загрузке)?  

## **Часть 2. Windows 7**  

---
#### **Задание 1: Базовый мониторинг памяти через Диспетчер задач**  

1. **Запустите Диспетчер задач** (`Ctrl + Shift + Esc`).  
2. Перейдите на вкладку **Быстродействие**:  
   - Зафиксируйте значения:  
     - **Физическая память**:  
       - Всего, Доступно, Кэш.  
     - **Система**:  
       - Выделено (виртуальная память).  
	- Сделайте скриншот
1. На вкладке **Процессы**:  
   - Отсортируйте процессы по столбцу **Память (рабочий набор)**.  
   - Запишите 3 процесса с наибольшим потреблением памяти.  
   - Сделайте скриншот

**Вопросы для отчёта:**  
- Что означает **рабочий набор** (Working Set) процесса?  
- Как связаны **доступная физическая память** и **кэш**?  

---
#### **Задание 2: Анализ памяти через Resource Monitor**  

1. Запустите **Resource Monitor** (введите `resmon` в поиске).  
2. На вкладке **Память**:  
   - Просмотрите таблицу **Процессы**:  
     - **Ошибок страниц/сек**, **Рабочий набор**, **Обеспеченная память**.  
   - В разделе **Физическая память** изучите график использования.  
3. Запустите **Браузер** и наблюдайте за изменением значений.  
4. Сделайте скриншот

**Вопросы для отчёта:**  
- Что такое **ошибка страницы** (Page Fault)?  
- Чем **обеспеченная память** (Commit) отличается от **рабочего набора**?  

---
#### **Задание 3: Управление файлом подкачки**  

1. Откройте **Панель управления** → **Система** → **Дополнительные параметры системы**.  
2. Во вкладке **Дополнительно** нажмите **Параметры** в разделе **Быстродействие**.  
3. Перейдите на вкладку **Дополнительно** → **Изменить** (в разделе **Виртуальная память**).  
4. Снимите галочку **Автоматически выбирать объём файла подкачки**.  
5. Настройте файл подкачки:  
   - Выберите **Указать размер**:  
     - Исходный размер = 2048 МБ.  
     - Максимальный размер = 4096 МБ.  
   - Сделайте скриншот
   - Нажмите **Задать** → **OK** и перезагрузите систему.  
6. Проверьте изменения через **Resource Monitor** → вкладка **Память**.  
7. Верните стандартные настройки

**Вопросы для отчёта:**  
- Почему файл подкачки рекомендуется размещать на SSD, а не на HDD?  
- Какие риски связаны с отключением файла подкачки?  

---
### **Заключительные вопросы для защиты:**  
1. Как определить, что системе не хватает памяти?  
2. Чем отличается `swapoff` от удаления swap-файла?  
3. Зачем нужен кэш страниц и как его очистить?  
4. Как определить, что системе не хватает физической памяти?  
5. Какие параметры файла подкачки оптимальны для SSD?  