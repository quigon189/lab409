### Тема
Основы работы в многопользовательской среде и управления файлами в операционной системе Linux

### Цель работы
- **Теоретическая:** Изучить принципы многопользовательской работы в Linux, освоить базовые команды для навигации и управления файловой системой.
- **Практическая:** Приобрести навыки работы с виртуальными терминалами, выполнения команд в командной строке, создания и управления файлами и каталогами.

### Задачи
1. Освоить переключение между виртуальными терминалами и работу в многопользовательском режиме.
2. Изучить и применить на практике основные команды Linux для работы с файловой системой.
3. Научиться использовать команды для поиска информации и работы с текстовыми файлами.
4. Выполнить операции с файлами и каталогами с использованием групповых операций.

### Оборудование и программное обеспечение
- **Программное обеспечение:** Дистрибутив Linux (Manjaro)
- **Оборудование (виртуальное/реальное):**
  - Виртуальные терминалы (tty1–tty7)
  - Эмулятор терминала в графическом режиме (например, GNOME Terminal, Konsole)
  - Учетная запись пользователя с правами выполнения базовых команд

### Краткие теоретические сведения

**Многопользовательский режим Linux** — историческая особенность ОС, обеспечивающая одновременную работу нескольких пользователей через виртуальные терминалы. По умолчанию создаётся 7 виртуальных терминалов (tty1–tty7), где последний обычно запускает графическую оболочку.  

**Основные команды для работы с терминалами:**  
- `tty` — показывает текущий терминал.  
- `who` — отображает список активных пользователей.  
- `su` — позволяет войти под другим пользователем.  
- `exit` или `Ctrl+D` — завершение сеанса.  

**Работа с файлами в Linux** отличается чувствительностью к регистру и использованием специальных символов.  

**Групповые операции с файлами** выполняются с помощью шаблонов:  
- `*` — любое количество символов.  
- `?` — один произвольный символ.  
- `[]` — один символ из указанного набора.  

---
### Справочник по командам Linux

#### **1. Команды работы с терминалами и пользователями**

**`tty`** — отображает имя текущего терминала

```text
$ tty
/dev/tty1
```

**`who`** — показывает пользователей, вошедших в систему

```text
$ who
user     tty1         2024-03-15 10:30
admin    pts/0        2024-03-15 11:15
```

Опции:

- `-a` — отображает всю информацию
- `-H` — показывает заголовки колонок
- `-q` — только имена и количество пользователей

**`whoami`** — показывает имя текущего пользователя

```text
$ whoami
user
```

**`su`** — смена пользователя

```text
$ su                    # вход под root
$ su username           # вход под другим пользователем
$ su - username         # вход с загрузкой окружения пользователя
```

**`exit`** — завершение сеанса

```text
$ exit
```

или комбинация клавиш `Ctrl+D`

#### **2. Команды навигации по файловой системе**

**`pwd`** (Print Working Directory) — показывает текущий каталог

```bash
$ pwd
/home/user
```

**`cd`** (Change Directory) — смена текущего каталога

```bash
$ cd /var/log          # переход в каталог /var/log
$ cd ~                 # переход в домашний каталог
$ cd ..                # переход на уровень выше
$ cd -                 # возврат в предыдущий каталог
$ cd                   # переход в домашний каталог
```

#### **3. Команды работы с файлами и каталогами**

**`ls`** (List) — список файлов и каталогов

```bash
$ ls                   # простой список
$ ls -l                # подробный список
$ ls -a                # показать скрытые файлы
$ ls -la               # подробно со скрытыми файлами
$ ls -lh               # размеры в читаемом формате
$ ls -R                # рекурсивный обход подкаталогов
$ ls -F                # добавить символы типов (/ для каталогов)
$ ls /home /var        # просмотр нескольких каталогов
```

**`mkdir`** (Make Directory) — создание каталога

```bash
$ mkdir test                     # создать каталог test
$ mkdir -p dir1/dir2/dir3       # создать цепочку каталогов
$ mkdir dir{1,2,3}              # создать несколько каталогов
```

**`touch`** — создание пустого файла или изменение временных меток

```bash
$ touch file.txt                # создать пустой файл
$ touch -t 202403151200 file   # установить время изменения
```

**`cp`** (Copy) — копирование файлов и каталогов

```bash
$ cp file1 file2                # копировать file1 в file2
$ cp file1 dir/                 # копировать файл в каталог
$ cp -r dir1 dir2               # рекурсивное копирование каталога
$ cp -i file1 file2             # запросить подтверждение при перезаписи
$ cp -v file1 file2             # вывести информацию о копировании
```

**`mv`** (Move) — перемещение или переименование файлов

```bash
$ mv oldname newname           # переименование
$ mv file dir/                 # перемещение в каталог
$ mv -i file1 file2            # запросить подтверждение
$ mv -v file dir               # вывести информацию
```

**`rm`** (Remove) — удаление файлов и каталогов

```bash
$ rm file.txt                  # удалить файл
$ rm -r dir                    # удалить каталог рекурсивно
$ rm -f file                   # удалить без подтверждения
$ rm -i file                   # запросить подтверждение
$ rm -rf dir                   # рекурсивное удаление без подтверждения
```

**`ln`** (Link) — создание ссылок

```bash
$ ln target link               # жесткая ссылка
$ ln -s target link            # символическая (мягкая) ссылка
$ ln -sf target link           # заменить существующую ссылку
```

#### **4. Команды просмотра файлов**

**`cat`** (Concatenate) — вывод содержимого файлов

```bash
$ cat file.txt                # вывести содержимое
$ cat file1 file2            # объединить и вывести
$ cat -n file.txt            # вывести с номерами строк
$ cat > newfile              # создать файл (ввод до Ctrl+D)
```

**`less`** — постраничный просмотр файлов

```bash
$ less file.txt              # открыть файл для просмотра
```

Клавиши навигации в `less`:

- `Space` или `Page Down` — следующая страница
- `b` или `Page Up` — предыдущая страница
- `↓` или `j` — следующая строка
- `↑` или `k` — предыдущая строка
- `/текст` — поиск текста вперед
- `?текст` — поиск текста назад
- `q` — выход
- `h` — помощь

**`more`** — альтернативный постраничный просмотр

```bash
$ more file.txt
```

#### **5. Команды поиска и фильтрации**

**`grep`** (Global Regular Expression Print) — поиск текста

```bash
$ grep "текст" file.txt              # поиск строк с "текст"
$ grep -i "text" file.txt            # без учета регистра
$ grep -n "text" file.txt            # показать номера строк
$ grep -r "text" dir/                # рекурсивный поиск
$ grep -v "text" file.txt            # исключить строки с "текст"
$ grep -c "text" file.txt            # подсчитать количество
$ grep -l "text" *.txt               # показать имена файлов
```

#### **6. Справка и документация**

**`man`** (Manual) — руководство по командам

```bash
$ man ls                     # справка по команде ls
$ man 5 passwd              # справка из раздела 5
$ man -k "copy"             # поиск по ключевому слову
```

**`info`** — альтернативная документация

```bash
$ info ls
```

**`whatis`** — краткое описание команды

```bash
$ whatis ls
ls (1) - list directory contents
```

**`which`** — показывает полный путь к команде

```bash
$ which ls
/bin/ls
```

#### **7. Сочетания клавиш в терминале**

- `Ctrl+C` — прервать выполнение команды
- `Ctrl+Z` — приостановить выполнение команды
- `Ctrl+D` — конец ввода (выход из сеанса)
- `Ctrl+L` — очистить экран
- `Tab` — автодополнение команд и путей
- `↑`/`↓` — навигация по истории команд
- `Ctrl+R` — поиск по истории команд
- `Ctrl+A` — перейти в начало строки
- `Ctrl+E` — перейти в конец строки
- `Ctrl+U` — удалить от курсора до начала строки
- `Ctrl+K` — удалить от курсора до конца строки
- `Ctrl+Shift+C` — копировать (в графическом терминале)
- `Ctrl+Shift+V` — вставить (в графическом терминале)

---
### Порядок выполнения работы

#### 1. Подготовительный этап
1. Внимательно изучите справку представленную выше. Попробуйте выполнить указанные команды.
2. Запустите систему и войдите под учётной записью `user`.
3. Переключитесь между виртуальными терминалами с помощью `Ctrl+Alt+F1`–`Ctrl+Alt+F6`.
4. Запустите эмулятор терминала в графическом режиме (обычно `Ctrl+Alt+F7`).
5. Выполните вход в любых 3 виртуальных терминалах (включая терминал с графической оболочкой)

#### 2. Основной этап
1. Для каждого виртуального терминала выполните
	1. Определите текущий терминал командой `tty` в каждом из открытых терминалов.
	2. Выполните команду `who` для просмотра активных пользователей.
	3. Выйдите командой `exit`.
2. Остальные команды выполняйте в терминале с графическим режимом.
3. Откройте файл `/etc/passwd` с помощью `less` и найдите запись о текущем пользователе с помощью `grep`.
4. Перейдите в домашний каталог, создайте каталог `test` и внутри него — `test2`.
5. Создайте файл `text`, переименуйте его в `text409`, скопируйте под именем `copy.txt`.
6. Создайте жёсткую и символическую ссылки на файл `copy.txt`.
7. Просмотрите содержимое каталога с подробным выводом (`ls -la`).
8. Удалите все созданные файлы и каталоги.

#### 3. Контрольный этап
1. Проверьте, что в системе остались только исходные файлы.
2. Убедитесь, что вы можете свободно переключаться между терминалами и выполнять базовые команды.
3. Сохраните скриншоты выполненных действий для отчёта.

### Контрольные вопросы
1. Чем отличается вывод команд `ls -F` и `ls -la`?
2. С помощью какой команды и как можно переместить файл в другой каталог?
3. Какие действия вы совершаете, нажимая на кнопки «стрелка вверх» и «стрелка вниз»?
4. Куда вы переходите, выполнив команду `cd` без параметров?
5. Как посмотреть, какие еще параметры можно задать команде `ls`?
6. Как осуществить просмотр подкаталогов и их содержимого?
7. Как осуществить просмотр скрытых файлов в домашнем каталоге?
8. Как осуществить создание нового каталога и необходимых подкаталогов рекурсивно?
9. Как осуществить рекурсивное копирование всех файлов и подкаталогов из одного каталога в другой?
10. Как рекурсивно удалить все файлы и подкаталоги в определённом каталоге?
11. Какой каталог будет установлен текущим сразу же после входа пользователя в систему?
12. Какой каталог будет установлен текущим после выполнения команды `su`?
13. Какой терминал (tty) будет открыт по нажатию `Ctrl+Alt+F7`?
14. Как и где в Linux можно вводить команды командной строки?

### Содержание отчета
- Тема, цель и задачи работы.
- Скриншоты, иллюстрирующие выполнение каждого этапа работы.
- Результаты выполнения заданий:
  - Выводы команд `tty`, `who`, `ls`, `pwd` и других.
  - Созданная структура каталогов и файлов.
  - Примеры использования групповых операций.
- Ответы на контрольные вопросы.
- **Выводы по работе:** анализ достижения цели, описание возникших трудностей, предложения по улучшению выполнения лабораторной работы.